var G=Object.defineProperty;var P=Object.getOwnPropertySymbols;var F=Object.prototype.hasOwnProperty,J=Object.prototype.propertyIsEnumerable;var N=(s,e,t)=>e in s?G(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t,I=(s,e)=>{for(var t in e||(e={}))F.call(e,t)&&N(s,t,e[t]);if(P)for(var t of P(e))J.call(e,t)&&N(s,t,e[t]);return s};import{r as Q,c as b,a as C,o as d,b as u,d as o,e as y,F as q,S as R,f as X,t as p,g as j,h as L,u as k,M,w as V,i as g,v as h,j as Z,k as ee,l as te,m as oe,n as ne,p as se,q as ae,s as re,x as D,y as ie,z as ce,A as U,B as le}from"./vendor.d4444e46.js";const de=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function t(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerpolicy&&(i.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?i.credentials="include":r.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(r){if(r.ep)return;r.ep=!0;const i=t(r);fetch(r.href,i)}};de();const c=Q({user:{},account:{},events:[],activeEvent:{},comments:[],attendees:[],myEvents:[],attending:[]});var f=(s,e)=>{for(const[t,n]of e)s[t]=n;return s};const ue={name:"App",setup(){return{appState:b(()=>c)}}},me={class:"container-fluid"};function _e(s,e,t,n,r,i){const a=C("Navbar"),v=C("router-view");return d(),u(q,null,[o("header",null,[y(a)]),o("main",me,[y(v)])],64)}var ve=f(ue,[["render",_e]]);class E{static async confirm(e="Are you sure?",t="You won't be able to revert this!",n="warning",r="Yes, delete it!"){try{return!!(await R.fire({title:e,text:t,icon:n,showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:r})).isConfirmed}catch{return!1}}static toast(e="Warning!",t="warning",n="top-end",r=3e3,i=!0){R.fire({title:e,icon:t,position:n,timer:r,timerProgressBar:i,toast:!0,showConfirmButton:!1})}}const B=window.location.origin.includes("localhost"),O=B?"http://localhost:3000":"",ge="mickshanny.us.auth0.com",pe="luwNBP378EfKtXGGgxJj9T2kNZ1A562I",he="http://Sandbox.com";function x(s,e){if(B)console[s](`[${s}] :: ${new Date().toLocaleTimeString()} :: `,...e);else{switch(s){case"log":case"assert":return}console[s](`[${s}] :: ${new Date().toLocaleTimeString()} :: `,...e)}}const _={log(){x("log",arguments)},error(){x("error",arguments)},warn(){x("warn",arguments)},assert(){x("assert",arguments)},trace(){x("trace",arguments)}},l=X.create({baseURL:O,timeout:8e3});class be{async createComment(e,t){_.log(e,t),t.eventId=e;const n=await l.post("api/comments/",t);console.log("creating this comment",n.data)}async deleteComment(e){const t=await l.delete(`api/comments/${e}`);console.log("deleting this comment",t.data),c.comments=c.comments.filter(n=>n.id!==e)}}const fe=new be;const ye={props:{comment:{type:Object,required:!0}},setup(s){return{users:b(()=>c.user),account:b(()=>c.account),async deleteComment(){try{await E.confirm("Are you sure you want to delete this comment?")&&await fe.deleteComment(s.comment.id)}catch(e){E.toast(e.message,"error"),logger.error(e)}}}}},Ee={class:"card mt-3"},we={class:"card-body"},Ce={class:"row"},xe={class:"col-12"},Te={class:"d-flex align-items-center"},Ae=["src","alt","title"],Se={class:"fs-6 ps-3"},$e={class:"p-2 ps-4 mt-1"},ke={class:"fs-4"};function De(s,e,t,n,r,i){return d(),u("div",Ee,[o("div",we,[o("div",Ce,[o("div",xe,[o("div",Te,[o("img",{class:"user-img",src:t.comment.creator.picture,alt:t.comment.creator.name,title:t.comment.creator.name},null,8,Ae),o("p",Se,p(t.comment.creator.name),1)]),o("div",$e,[o("p",ke,p(t.comment.body),1)]),t.comment.creator.id===n.account.id?(d(),u("i",{key:0,title:"delete comment","aria-label":"delete comment",class:"mdi mdi-trash-can-outline d-flex justify-content-end selectable",onClick:e[0]||(e[0]=(...a)=>n.deleteComment&&n.deleteComment(...a))})):j("",!0)])])])])}var Oe=f(ye,[["render",De]]),Pe=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Oe});class Ne{async getEvents(){const e=await l.get("api/events/");console.log(e.data),c.events=e.data}async getEventById(e){const t=await l.get(`api/events/${e}`);console.log(t.data),c.activeEvent=t.data}async createEvent(e){const t=await l.post("api/events",e);return console.log(t.data),c.events.unshift(t.data),t.data}async getEventComments(e){const t=await l.get(`api/events/${e}/comments`);console.log("getting event comments",t.data),c.comments=t.data}async getEventAttendees(e){const t=await l.get(`api/events/${e}/attendees`);console.log("getting event attendees",t.data),c.attendees=t.data}async editEvent(e){const t=await l.put("api/events/"+e.id,e);console.log("editing this event"),c.activeEvent=t.data}async cancelEvent(e){const t=await l.delete(`api/events/${e}`);console.log("cancelling this event",t.data)}}const H=new Ne,Ie={setup(){const s=L({}),e=k();return{editable:s,router:e,async createEvent(){try{const t=await H.createEvent(s.value);s.value={},M.getOrCreateInstance(document.getElementById("create-event-modal")).hide(),e.push({name:"EventDetails",params:{id:t.id}})}catch(t){E.toast(t.message,"error"),logger.error(t)}}}}},qe={class:"modal",tabindex:"-1"},Re={class:"modal-dialog"},je={class:"modal-content"},Le=o("div",{class:"modal-header"},[o("h5",{class:"modal-title text-secondary fw-bolder"},"CREATE NEW EVENT"),o("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",required:""})],-1),Me={class:"modal-body"},Ve={class:"col-12"},Ue=o("label",{for:"inputEventName",class:"form-label"},"Event Name",-1),Be={class:"col-12"},He=o("label",{for:"inputEventDescription",class:"form-label"},"Description",-1),ze={class:"col-12"},Ke=o("label",{for:"inputEventImage",class:"form-label"},"Event Image",-1),We={class:"col-12"},Ye=o("label",{for:"inputEventLocation",class:"form-label"},"Event Location",-1),Ge={class:"col-md-6"},Fe=o("label",{for:"inputEventDate",class:"form-label"},"Start Date",-1),Je={class:"col-md-4"},Qe=o("label",{for:"inputEventType",class:"form-label"},"Event Type",-1),Xe=o("option",{selected:""},"Type...",-1),Ze=o("option",null,"Concert",-1),et=o("option",null,"Sport",-1),tt=o("option",null,"Convention",-1),ot=o("option",null,"Digital",-1),nt=o("option",null,"Expos",-1),st=[Xe,Ze,et,tt,ot,nt],at={class:"col-md-2"},rt=o("label",{for:"inputEventCapacity",class:"form-label"},"Capacity",-1),it=o("div",{class:"modal-footer"},[o("button",{class:"btn btn-dark","data-bs-dismiss":"modal","aria-label":"close"}," Close "),o("button",{type:"submit",class:"btn btn-dark","aria-label":"save"}," Save ")],-1);function ct(s,e,t,n,r,i){return d(),u("div",qe,[o("div",Re,[o("div",je,[Le,o("div",Me,[o("form",{onSubmit:e[7]||(e[7]=V(a=>n.createEvent(),["prevent"])),class:"row g-3"},[o("div",Ve,[Ue,g(o("input",{type:"text",class:"form-control",id:"inputEventName","onUpdate:modelValue":e[0]||(e[0]=a=>n.editable.name=a),required:"true"},null,512),[[h,n.editable.name]])]),o("div",Be,[He,g(o("textarea",{name:"eventDescription",rows:"5",type:"text",class:"form-control",id:"inputEventDescription","onUpdate:modelValue":e[1]||(e[1]=a=>n.editable.description=a),required:"true"},null,512),[[h,n.editable.description]])]),o("div",ze,[Ke,g(o("input",{type:"url",class:"form-control",id:"inputEventImage",placeholder:"Image Url...","onUpdate:modelValue":e[2]||(e[2]=a=>n.editable.coverImg=a),required:"true"},null,512),[[h,n.editable.coverImg]])]),o("div",We,[Ye,g(o("input",{type:"text",class:"form-control",id:"inputEventLocation",placeholder:"Location","onUpdate:modelValue":e[3]||(e[3]=a=>n.editable.location=a),required:"true"},null,512),[[h,n.editable.location]])]),o("div",Ge,[Fe,g(o("input",{type:"date",class:"form-control",id:"inputEventDate","onUpdate:modelValue":e[4]||(e[4]=a=>n.editable.startDate=a),required:"true"},null,512),[[h,n.editable.startDate]])]),o("div",Je,[Qe,g(o("select",{id:"inputEventType",class:"form-select","onUpdate:modelValue":e[5]||(e[5]=a=>n.editable.type=a),required:"true"},st,512),[[Z,n.editable.type]])]),o("div",at,[rt,g(o("input",{type:"number",class:"form-control",id:"inputEventCapacity","onUpdate:modelValue":e[6]||(e[6]=a=>n.editable.capacity=a),required:"true"},null,512),[[h,n.editable.capacity]])]),it],32)])])])])}var lt=f(Ie,[["render",ct]]),dt=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:lt});const ut={setup(){const s=ee(),e=L({});return te(()=>{e.value=I({},c.activeEvent)}),{editable:e,route:s,async editEvent(){try{await H.editEvent(e.value),M.getOrCreateInstance(document.getElementById("edit-event-modal")).hide()}catch(t){E.toast(t.message,"error"),_.error(t)}}}}},mt={class:"modal",tabindex:"-1"},_t={class:"modal-dialog"},vt={class:"modal-content"},gt=o("div",{class:"modal-header"},[o("h5",{class:"modal-title text-dark"},"Edit Event"),o("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),pt={class:"modal-body"},ht={class:"my-2"},bt=o("h5",null,"Event Name",-1),ft=o("h5",null,"Event Description",-1),yt=o("div",{class:"modal-footer"},[o("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"}," Close "),o("button",{type:"submit",class:"btn btn-outline-primary"}," Edit Event ")],-1);function Et(s,e,t,n,r,i){return d(),u("div",mt,[o("div",_t,[o("div",vt,[gt,o("div",pt,[o("form",{onSubmit:e[2]||(e[2]=V(a=>n.editEvent(),["prevent"]))},[o("div",ht,[bt,g(o("input",{"onUpdate:modelValue":e[0]||(e[0]=a=>n.editable.name=a),type:"text",class:"form-text rounded w-100 border-1 border-light",required:"true"},null,512),[[h,n.editable.name]])]),ft,g(o("input",{"onUpdate:modelValue":e[1]||(e[1]=a=>n.editable.description=a),type:"text",class:"form-text w-100 border-1 border-light",required:"true"},null,512),[[h,n.editable.description]]),yt],32)])])])])}var wt=f(ut,[["render",Et]]),Ct=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:wt});const xt={props:{event:{type:Object,required:!0}},setup(s){const e=k();return{async goToEventDetails(){e.push({name:"EventDetails",params:{id:s.event.id}})}}}},Tt={class:"col-md-3 p-3"},At=["title"],St=["src","alt"],$t={class:"card-img-overlay"},kt={class:"text-white text-uppercase fw-bolder"},Dt={key:0,class:"text-danger"};function Ot(s,e,t,n,r,i){return d(),u("div",Tt,[o("div",{class:"card border-dark selectable",onClick:e[0]||(e[0]=a=>n.goToEventDetails()),title:t.event.name+" Details"},[o("img",{src:t.event.coverImg,class:"card-img",alt:t.event.name+"cover image"},null,8,St),o("div",$t,[o("div",kt,[o("p",null,p(t.event.name),1),o("p",null,p(t.event.location),1),o("p",null,p(new Date(t.event.startDate).toLocaleString()),1),o("p",null,p(t.event.capacity),1),t.event.isCanceled?(d(),u("p",Dt,"Cancelled")):j("",!0)])])],8,At)])}var Pt=f(xt,[["render",Ot]]),Nt=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Pt});const It="modulepreload",z={},qt="/",T=function(e,t){return!t||t.length===0?e():Promise.all(t.map(n=>{if(n=`${qt}${n}`,n in z)return;z[n]=!0;const r=n.endsWith(".css"),i=r?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${n}"]${i}`))return;const a=document.createElement("link");if(a.rel=r?"stylesheet":It,r||(a.as="script",a.crossOrigin=""),a.href=n,document.head.appendChild(a),r)return new Promise((v,w)=>{a.addEventListener("load",v),a.addEventListener("error",w)})})).then(()=>e())};function Rt(s){switch(s){case"./pages/AboutPage.vue":return T(()=>import("./AboutPage.50053124.js"),["assets/AboutPage.50053124.js","assets/vendor.d4444e46.js"]);case"./pages/AccountPage.vue":return T(()=>import("./AccountPage.b9babdda.js"),["assets/AccountPage.b9babdda.js","assets/AccountPage.0e991160.css","assets/vendor.d4444e46.js"]);case"./pages/EventDetailsPage.vue":return T(()=>import("./EventDetailsPage.ccf0f7ee.js"),["assets/EventDetailsPage.ccf0f7ee.js","assets/EventDetailsPage.97e8354a.css","assets/vendor.d4444e46.js"]);case"./pages/HomePage.vue":return T(()=>import("./HomePage.bc599a73.js"),["assets/HomePage.bc599a73.js","assets/HomePage.c058cc7a.css","assets/vendor.d4444e46.js"]);case"./pages/ProfilePage.vue":return T(()=>import("./ProfilePage.71d11766.js"),["assets/ProfilePage.71d11766.js","assets/vendor.d4444e46.js"]);default:return new Promise(function(e,t){(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(t.bind(null,new Error("Unknown variable dynamic import: "+s)))})}}function S(s){return()=>Rt(`./pages/${s}.vue`)}const jt=[{path:"/",name:"Home",component:S("HomePage")},{path:"/about",name:"About",component:S("AboutPage")},{path:"/events/:id",name:"EventDetails",component:S("EventDetailsPage")},{path:"/account",name:"Account",component:S("AccountPage"),beforeEnter:se}],K=oe({linkActiveClass:"router-link-active",linkExactActiveClass:"router-link-exact-active",history:ne(),routes:jt});class Lt{async getAccount(){try{const e=await l.get("/account");c.account=e.data}catch(e){_.error("HAVE YOU STARTED YOUR SERVER YET???",e)}}async getAccountEvents(){const e=await l.get("account/attendees");console.log("getting attending events",e.data),c.attending=e.data.map(t=>t.event)}async getMyEvents(e){const t=await l.get(`api/events/${e}`);console.log(t.data),_.error(err),c.myEvents=t.data}}const Mt=new Lt,$={connection:"connection",connected:"connected",disconnect:"disconnect",authenticate:"authenticate",authenticated:"authenticated",userConnected:"userConnected",userDisconnected:"userDisconnected",error:"error"};class Vt{constructor(e=!0,t=O){this.socket=ae(t||O),this.requiresAuth=e,this.queue=[],this.authenticated=!1,this.on($.connected,this.onConnected).on($.authenticated,this.onAuthenticated).on($.error,this.onError)}on(e,t){var n;return(n=this.socket)==null||n.on(e,t.bind(this)),this}onConnected(e){_.log("[SOCKET_CONNECTION]",e),this.connected=!0,this.playback()}onAuthenticated(e){_.log("[SOCKET_AUTHENTICATED]",e),this.authenticated=!0,this.playback()}authenticate(e){var t;(t=this.socket)==null||t.emit($.authenticate,e)}onError(e){_.error("[SOCKET_ERROR]",e)}enqueue(e,t){_.log("[ENQUEING_ACTION]",{action:e,payload:t}),this.queue.push({action:e,payload:t})}playback(){_.log("[SOCKET_PLAYBACK]");const e=[...this.queue];this.queue=[],e.forEach(t=>{this.emit(t.action,t.payload)})}emit(e,t=void 0){if(this.requiresAuth&&!this.authenticated)return this.enqueue(e,t);if(!this.connected)return this.enqueue(e,t);this.socket.emit(e,t)}}class Ut extends Vt{constructor(){super();this.on("error",this.onError).on("joined:room",this.joinedRoom).on("new:comment",this.newComment).on("list:users",this.listUsers).on("new:notify",this.notify)}joinRoom(e){this.emit("join:room",{roomName:e})}onError(e){E.toast(e.message,"error")}joinedRoom(e){_.log("[SOCKET JOINED ROOM]",e.roomName)}newComment(e){_.log("socket comment",e),c.comments.unshift(e)}notify(e){E.toast(e.message)}listUsers(e){_.log("users in room",e)}}const W=new Ut,m=re({domain:ge,clientId:pe,audience:he,useRefreshTokens:!0,onRedirectCallback:s=>{K.push(s&&s.targetUrl?s.targetUrl:window.location.pathname)}});m.on(m.AUTH_EVENTS.AUTHENTICATED,async function(){l.defaults.headers.authorization=m.bearer,l.interceptors.request.use(Bt),c.user=m.user,await Mt.getAccount(),W.authenticate(m.bearer)});async function Bt(s){if(!m.isAuthenticated)return s;const e=m.identity.exp*1e3,t=e<Date.now(),n=e<Date.now()+1e3*60*60*12;return t?await m.loginWithPopup():n&&(await m.getTokenSilently(),l.defaults.headers.authorization=m.bearer,W.authenticate(m.bearer)),s}const Ht={setup(){return{user:b(()=>c.user),async login(){m.loginWithPopup()},async logout(){m.logout({returnTo:window.location.origin})}}}},A=s=>(ie("data-v-8bed62b0"),s=s(),ce(),s),zt={class:"navbar navbar-expand-lg navbar-dark bg-dark px-3"},Kt=A(()=>o("div",{class:"d-flex align-items-end"},[o("i",{class:"mdi mdi-castle fs-1"}),o("p",null,"THE TOWER")],-1)),Wt=A(()=>o("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarText","aria-controls":"navbarText","aria-expanded":"false","aria-label":"Toggle navigation"},[o("span",{class:"navbar-toggler-icon"})],-1)),Yt={class:"collapse navbar-collapse",id:"navbarText"},Gt=A(()=>o("ul",{class:"navbar-nav me-auto"},[o("li",null,[o("button",{class:"btn btn-outline-success lighten-30 selectable text-uppercase","aria-label":"Create new event",title:"create new event","data-bs-toggle":"modal","data-bs-target":"#create-event-modal"}," Create Event ")])],-1)),Ft={class:"navbar-text"},Jt={key:1,class:"dropdown my-2 my-lg-0"},Qt={class:"dropdown-toggle selectable","data-bs-toggle":"dropdown","aria-expanded":"false",id:"authDropdown"},Xt=["src"],Zt={class:"mx-3 text-success lighten-30"},eo={class:"dropdown-menu p-0 list-group w-100","aria-labelledby":"authDropdown"},to=A(()=>o("div",{class:"list-group-item list-group-item-action hoverable"}," Manage Account ",-1)),oo=A(()=>o("i",{class:"mdi mdi-logout"},null,-1)),no=U(" logout "),so=[oo,no];function ao(s,e,t,n,r,i){const a=C("router-link"),v=C("CreateEventModal");return d(),u(q,null,[o("nav",zt,[y(a,{class:"navbar-brand d-flex",to:{name:"Home"}},{default:D(()=>[Kt]),_:1}),Wt,o("div",Yt,[Gt,o("span",Ft,[n.user.isAuthenticated?(d(),u("div",Jt,[o("div",Qt,[o("img",{src:n.user.picture,alt:"user photo",height:"40",class:"rounded"},null,8,Xt),o("span",Zt,p(n.user.name),1)]),o("div",eo,[y(a,{to:{name:"Account"}},{default:D(()=>[to]),_:1}),o("div",{class:"list-group-item list-group-item-action hoverable text-danger",onClick:e[1]||(e[1]=(...w)=>n.logout&&n.logout(...w))},so)])])):(d(),u("button",{key:0,class:"btn selectable text-success lighten-30 text-uppercase my-2 my-lg-0",onClick:e[0]||(e[0]=(...w)=>n.login&&n.login(...w))}," Login "))])])]),y(v,{id:"create-event-modal"})],64)}var ro=f(Ht,[["render",ao],["__scopeId","data-v-8bed62b0"]]),io=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:ro});const co={setup(){const s=k();return{async goToProfile(){s.push({name:"Account"})},user:b(()=>c.user),async login(){AuthService.loginWithPopup()},async logout(){AuthService.logout({returnTo:window.location.origin})},account:b(()=>c.account),profile:b(()=>c.profile),router:s}}},lo={class:"sidebar d-flex justify-content-center bg-dark"},uo={class:"mt-5"},mo=["src","alt","title"],_o={class:"p-1 mt-2"},vo={key:1,class:"dropdown my-2 my-lg-0"},go=o("div",{class:"dropdown-toggle selectable","data-bs-toggle":"dropdown","aria-expanded":"false",id:"authDropdown"},null,-1),po={class:"dropdown-menu p-0 list-group w-100","aria-labelledby":"authDropdown"},ho=o("div",{class:"list-group-item list-group-item-action hoverable"}," Manage Account ",-1),bo=o("i",{class:"mdi mdi-logout"},null,-1),fo=U(" logout "),yo=[bo,fo];function Eo(s,e,t,n,r,i){const a=C("router-link");return d(),u("div",lo,[o("div",uo,[o("img",{onClick:e[0]||(e[0]=v=>n.goToProfile()),class:"account-img ms-3",src:n.account.picture,alt:n.account.name+"picture",title:n.account.name+"picture"},null,8,mo),o("div",_o,[o("p",null,p(n.account.name),1),n.user.isAuthenticated?(d(),u("div",vo,[go,o("div",po,[y(a,{to:{name:"Account"}},{default:D(()=>[ho]),_:1}),o("div",{class:"list-group-item list-group-item-action hoverable text-danger",onClick:e[2]||(e[2]=(...v)=>n.logout&&n.logout(...v))},yo)])])):(d(),u("button",{key:0,class:"btn selectable text-success lighten-30 text-uppercase my-2 my-lg-0",onClick:e[1]||(e[1]=(...v)=>n.login&&n.login(...v))}," Login "))])])])}var wo=f(co,[["render",Eo]]),Co=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:wo});function xo(s){Object.entries({"./components/Comment.vue":Pe,"./components/CreateEventModal.vue":dt,"./components/EditEventModal.vue":Ct,"./components/Event.vue":Nt,"./components/Navbar.vue":io,"./components/Sidebar.vue":Co}).forEach(([t,n])=>{const r=n.name||t.substr(t.lastIndexOf("/")+1).replace(/\.\w+$/,"");s.component(r,n.default)})}const Y=le(ve);xo(Y);Y.use(K).mount("#app");export{c as A,E as P,f as _,Mt as a,l as b,fe as c,H as e,_ as l,W as s};
