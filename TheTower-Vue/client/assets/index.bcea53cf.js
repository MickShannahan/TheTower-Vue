var Y=Object.defineProperty;var D=Object.getOwnPropertySymbols;var F=Object.prototype.hasOwnProperty,G=Object.prototype.propertyIsEnumerable;var P=(a,e,t)=>e in a?Y(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,O=(a,e)=>{for(var t in e||(e={}))F.call(e,t)&&P(a,t,e[t]);if(D)for(var t of D(e))G.call(e,t)&&P(a,t,e[t]);return a};import{r as Q,c as b,a as w,o as d,b as u,d as o,e as y,F as I,S as N,f as X,t as p,g as q,h as L,u as S,M,w as R,i as v,v as h,j as J,k as Z,l as ee,m as te,n as oe,p as ne,q as ae,s as k,x as se,y as re,z as V,A as ie}from"./vendor.53f5f295.js";const ce=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function t(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerpolicy&&(i.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?i.credentials="include":r.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(r){if(r.ep)return;r.ep=!0;const i=t(r);fetch(r.href,i)}};ce();const c=Q({user:{},account:{},events:[],activeEvent:{},comments:[],attendees:[],myEvents:[],attending:[]});var f=(a,e)=>{for(const[t,n]of e)a[t]=n;return a};const le={name:"App",setup(){return{appState:b(()=>c)}}};function de(a,e,t,n,r,i){const s=w("Navbar"),_=w("router-view");return d(),u(I,null,[o("header",null,[y(s)]),o("main",null,[y(_)])],64)}var ue=f(le,[["render",de]]);class x{static async confirm(e="Are you sure?",t="You won't be able to revert this!",n="warning",r="Yes, delete it!"){try{return!!(await N.fire({title:e,text:t,icon:n,showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:r})).isConfirmed}catch{return!1}}static toast(e="Warning!",t="warning",n="top-end",r=3e3,i=!0){N.fire({title:e,icon:t,position:n,timer:r,timerProgressBar:i,toast:!0,showConfirmButton:!1})}}const U=window.location.origin.includes("localhost"),j=U?"http://localhost:3000":"",me="dev-ynre1pz7.us.auth0.com",_e="koI64hAUtt7sCgyAXvri3QAIUMhBENg4",ve="thetower.com",l=X.create({baseURL:j,timeout:8e3});function C(a,e){if(U)console[a](`[${a}] :: ${new Date().toLocaleTimeString()} :: `,...e);else{switch(a){case"log":case"assert":return}console[a](`[${a}] :: ${new Date().toLocaleTimeString()} :: `,...e)}}const g={log(){C("log",arguments)},error(){C("error",arguments)},warn(){C("warn",arguments)},assert(){C("assert",arguments)},trace(){C("trace",arguments)}};class ge{async createComment(e,t){g.log(e,t),t.eventId=e;const n=await l.post("api/comments/",t);console.log("creating this comment",n.data),c.comments.push(n.data)}async deleteComment(e){const t=await l.delete(`api/comments/${e}`);console.log("deleting this comment",t.data),c.comments=c.comments.filter(n=>n.id!==e)}}const pe=new ge;const he={props:{comment:{type:Object,required:!0}},setup(a){return{users:b(()=>c.user),account:b(()=>c.account),async deleteComment(){try{await x.confirm("Are you sure you want to delete this comment?")&&await pe.deleteComment(a.comment.id)}catch(e){x.toast(e.message,"error"),logger.error(e)}}}}},be={class:"card mt-3"},fe={class:"card-body"},ye={class:"row"},Ee={class:"col-12"},we={class:"d-flex align-items-center"},xe=["src","alt","title"],Ce={class:"fs-6 ps-3"},Ae={class:"p-2 ps-4 mt-1"},Te={class:"fs-4"};function $e(a,e,t,n,r,i){return d(),u("div",be,[o("div",fe,[o("div",ye,[o("div",Ee,[o("div",we,[o("img",{class:"user-img",src:t.comment.creator.picture,alt:t.comment.creator.name,title:t.comment.creator.name},null,8,xe),o("p",Ce,p(t.comment.creator.name),1)]),o("div",Ae,[o("p",Te,p(t.comment.body),1)]),t.comment.creator.id===n.account.id?(d(),u("i",{key:0,title:"delete comment","aria-label":"delete comment",class:"mdi mdi-trash-can-outline d-flex justify-content-end selectable",onClick:e[0]||(e[0]=(...s)=>n.deleteComment&&n.deleteComment(...s))})):q("",!0)])])])])}var Se=f(he,[["render",$e]]),ke=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Se});class De{async getEvents(){const e=await l.get("api/events/");console.log(e.data),c.events=e.data}async getEventById(e){const t=await l.get(`api/events/${e}`);console.log(t.data),c.activeEvent=t.data}async createEvent(e){const t=await l.post("api/events",e);return console.log(t.data),c.events.unshift(t.data),t.data}async getEventComments(e){const t=await l.get(`api/events/${e}/comments`);console.log("getting event comments",t.data),c.comments=t.data}async getEventAttendees(e){const t=await l.get(`api/events/${e}/attendees`);console.log("getting event attendees",t.data),c.attendees=t.data}async editEvent(e){const t=await l.put("api/events/"+e.id,e);console.log("editing this event"),c.activeEvent=t.data}async cancelEvent(e){const t=await l.delete(`api/events/${e}`);console.log("cancelling this event",t.data)}}const B=new De,Pe={setup(){const a=L({}),e=S();return{editable:a,router:e,async createEvent(){try{const t=await B.createEvent(a.value);a.value={},M.getOrCreateInstance(document.getElementById("create-event-modal")).hide(),e.push({name:"EventDetails",params:{id:t.id}})}catch(t){x.toast(t.message,"error"),logger.error(t)}}}}},Oe={class:"modal",tabindex:"-1"},Ie={class:"modal-dialog"},Ne={class:"modal-content"},qe=o("div",{class:"modal-header"},[o("h5",{class:"modal-title text-secondary fw-bolder"},"CREATE NEW EVENT"),o("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",required:""})],-1),Le={class:"modal-body"},Me={class:"col-12"},Re=o("label",{for:"inputEventName",class:"form-label"},"Event Name",-1),Ve={class:"col-12"},Ue=o("label",{for:"inputEventDescription",class:"form-label"},"Description",-1),je={class:"col-12"},Be=o("label",{for:"inputEventImage",class:"form-label"},"Event Image",-1),He={class:"col-12"},ze=o("label",{for:"inputEventLocation",class:"form-label"},"Event Location",-1),We={class:"col-md-6"},Ke=o("label",{for:"inputEventDate",class:"form-label"},"Start Date",-1),Ye={class:"col-md-4"},Fe=o("label",{for:"inputEventType",class:"form-label"},"Event Type",-1),Ge=o("option",{selected:""},"Type...",-1),Qe=o("option",null,"Concert",-1),Xe=o("option",null,"Sport",-1),Je=o("option",null,"Convention",-1),Ze=o("option",null,"Digital",-1),et=o("option",null,"Expos",-1),tt=[Ge,Qe,Xe,Je,Ze,et],ot={class:"col-md-2"},nt=o("label",{for:"inputEventCapacity",class:"form-label"},"Capacity",-1),at=o("div",{class:"modal-footer"},[o("button",{class:"btn btn-dark","data-bs-dismiss":"modal","aria-label":"close"}," Close "),o("button",{type:"submit",class:"btn btn-dark","aria-label":"save"}," Save ")],-1);function st(a,e,t,n,r,i){return d(),u("div",Oe,[o("div",Ie,[o("div",Ne,[qe,o("div",Le,[o("form",{onSubmit:e[7]||(e[7]=R(s=>n.createEvent(),["prevent"])),class:"row g-3"},[o("div",Me,[Re,v(o("input",{type:"text",class:"form-control",id:"inputEventName","onUpdate:modelValue":e[0]||(e[0]=s=>n.editable.name=s),required:"true"},null,512),[[h,n.editable.name]])]),o("div",Ve,[Ue,v(o("textarea",{name:"eventDescription",rows:"5",type:"text",class:"form-control",id:"inputEventDescription","onUpdate:modelValue":e[1]||(e[1]=s=>n.editable.description=s),required:"true"},null,512),[[h,n.editable.description]])]),o("div",je,[Be,v(o("input",{type:"url",class:"form-control",id:"inputEventImage",placeholder:"Image Url...","onUpdate:modelValue":e[2]||(e[2]=s=>n.editable.coverImg=s),required:"true"},null,512),[[h,n.editable.coverImg]])]),o("div",He,[ze,v(o("input",{type:"text",class:"form-control",id:"inputEventLocation",placeholder:"Location","onUpdate:modelValue":e[3]||(e[3]=s=>n.editable.location=s),required:"true"},null,512),[[h,n.editable.location]])]),o("div",We,[Ke,v(o("input",{type:"date",class:"form-control",id:"inputEventDate","onUpdate:modelValue":e[4]||(e[4]=s=>n.editable.startDate=s),required:"true"},null,512),[[h,n.editable.startDate]])]),o("div",Ye,[Fe,v(o("select",{id:"inputEventType",class:"form-select","onUpdate:modelValue":e[5]||(e[5]=s=>n.editable.type=s),required:"true"},tt,512),[[J,n.editable.type]])]),o("div",ot,[nt,v(o("input",{type:"number",class:"form-control",id:"inputEventCapacity","onUpdate:modelValue":e[6]||(e[6]=s=>n.editable.capacity=s),required:"true"},null,512),[[h,n.editable.capacity]])]),at],32)])])])])}var rt=f(Pe,[["render",st]]),it=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:rt});const ct={setup(){const a=Z(),e=L({});return ee(()=>{e.value=O({},c.activeEvent)}),{editable:e,route:a,async editEvent(){try{await B.editEvent(e.value),M.getOrCreateInstance(document.getElementById("edit-event-modal")).hide()}catch(t){x.toast(t.message,"error"),g.error(t)}}}}},lt={class:"modal",tabindex:"-1"},dt={class:"modal-dialog"},ut={class:"modal-content"},mt=o("div",{class:"modal-header"},[o("h5",{class:"modal-title text-dark"},"Edit Event"),o("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),_t={class:"modal-body"},vt={class:"my-2"},gt=o("h5",null,"Event Name",-1),pt=o("h5",null,"Event Description",-1),ht=o("div",{class:"modal-footer"},[o("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"}," Close "),o("button",{type:"submit",class:"btn btn-outline-primary"}," Edit Event ")],-1);function bt(a,e,t,n,r,i){return d(),u("div",lt,[o("div",dt,[o("div",ut,[mt,o("div",_t,[o("form",{onSubmit:e[2]||(e[2]=R(s=>n.editEvent(),["prevent"]))},[o("div",vt,[gt,v(o("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>n.editable.name=s),type:"text",class:"form-text rounded w-100 border-1 border-light",required:"true"},null,512),[[h,n.editable.name]])]),pt,v(o("input",{"onUpdate:modelValue":e[1]||(e[1]=s=>n.editable.description=s),type:"text",class:"form-text w-100 border-1 border-light",required:"true"},null,512),[[h,n.editable.description]]),ht],32)])])])])}var ft=f(ct,[["render",bt]]),yt=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:ft});const Et={props:{event:{type:Object,required:!0}},setup(a){const e=S();return{async goToEventDetails(){e.push({name:"EventDetails",params:{id:a.event.id}})}}}},wt={class:"col-md-3 p-3"},xt=["title"],Ct=["src","alt"],At={class:"card-img-overlay"},Tt={class:"text-white text-uppercase fw-bolder"},$t={key:0,class:"text-danger"};function St(a,e,t,n,r,i){return d(),u("div",wt,[o("div",{class:"card border-dark selectable",onClick:e[0]||(e[0]=s=>n.goToEventDetails()),title:t.event.name+" Details"},[o("img",{src:t.event.coverImg,class:"card-img",alt:t.event.name+"cover image"},null,8,Ct),o("div",At,[o("div",Tt,[o("p",null,p(t.event.name),1),o("p",null,p(t.event.location),1),o("p",null,p(new Date(t.event.startDate).toLocaleString()),1),o("p",null,p(t.event.capacity),1),t.event.isCanceled?(d(),u("p",$t,"Cancelled")):q("",!0)])])],8,xt)])}var kt=f(Et,[["render",St]]),Dt=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:kt});const Pt="modulepreload",H={},Ot="/",A=function(e,t){return!t||t.length===0?e():Promise.all(t.map(n=>{if(n=`${Ot}${n}`,n in H)return;H[n]=!0;const r=n.endsWith(".css"),i=r?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${n}"]${i}`))return;const s=document.createElement("link");if(s.rel=r?"stylesheet":Pt,r||(s.as="script",s.crossOrigin=""),s.href=n,document.head.appendChild(s),r)return new Promise((_,E)=>{s.addEventListener("load",_),s.addEventListener("error",E)})})).then(()=>e())};function It(a){switch(a){case"./pages/AboutPage.vue":return A(()=>import("./AboutPage.c5f3d614.js"),["assets/AboutPage.c5f3d614.js","assets/vendor.53f5f295.js"]);case"./pages/AccountPage.vue":return A(()=>import("./AccountPage.eec7339a.js"),["assets/AccountPage.eec7339a.js","assets/AccountPage.d152b7e7.css","assets/vendor.53f5f295.js"]);case"./pages/EventDetailsPage.vue":return A(()=>import("./EventDetailsPage.62b6da36.js"),["assets/EventDetailsPage.62b6da36.js","assets/EventDetailsPage.2aa075d2.css","assets/vendor.53f5f295.js"]);case"./pages/HomePage.vue":return A(()=>import("./HomePage.2d868d17.js"),["assets/HomePage.2d868d17.js","assets/HomePage.dab15b06.css","assets/vendor.53f5f295.js"]);case"./pages/ProfilePage.vue":return A(()=>import("./ProfilePage.8abbae9a.js"),["assets/ProfilePage.8abbae9a.js","assets/vendor.53f5f295.js"]);default:return new Promise(function(e,t){(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(t.bind(null,new Error("Unknown variable dynamic import: "+a)))})}}function $(a){return()=>It(`./pages/${a}.vue`)}const Nt=[{path:"/",name:"Home",component:$("HomePage")},{path:"/about",name:"About",component:$("AboutPage")},{path:"/events/:id",name:"EventDetails",component:$("EventDetailsPage")},{path:"/account",name:"Account",component:$("AccountPage"),beforeEnter:ne}],z=te({linkActiveClass:"router-link-active",linkExactActiveClass:"router-link-exact-active",history:oe(),routes:Nt});class qt{async getAccount(){try{const e=await l.get("/account");c.account=e.data}catch(e){g.error("HAVE YOU STARTED YOUR SERVER YET???",e)}}async getAccountEvents(){const e=await l.get("account/attendees");console.log("getting attending events",e.data),c.attending=e.data.map(t=>t.event)}async getMyEvents(e){const t=await l.get(`api/events/${e}`);console.log(t.data),g.error(err),c.myEvents=t.data}}const Lt=new qt,Mt={connection:"connection",connected:"connected",disconnect:"disconnect",authenticate:"authenticate",authenticated:"authenticated",userConnected:"userConnected",userDisconnected:"userDisconnected",error:"error"};class Rt{constructor(e=!1,t=j){}on(e,t){var n;return(n=this.socket)==null||n.on(e,t.bind(this)),this}onConnected(e){g.log("[SOCKET_CONNECTION]",e),this.connected=!0,this.playback()}onAuthenticated(e){g.log("[SOCKET_AUTHENTICATED]",e),this.authenticated=!0,this.playback()}authenticate(e){var t;(t=this.socket)==null||t.emit(Mt.authenticate,e)}onError(e){g.error("[SOCKET_ERROR]",e)}enqueue(e,t){g.log("[ENQUEING_ACTION]",{action:e,payload:t}),this.queue.push({action:e,payload:t})}playback(){g.log("[SOCKET_PLAYBACK]");const e=[...this.queue];this.queue=[],e.forEach(t=>{this.emit(t.action,t.payload)})}emit(e,t=void 0){if(this.requiresAuth&&!this.authenticated)return this.enqueue(e,t);if(!this.connected)return this.enqueue(e,t);this.socket.emit(e,t)}}class Vt extends Rt{constructor(){super();this.on("error",this.onError)}onError(e){x.toast(e.message,"error")}}const W=new Vt,m=ae({domain:me,clientId:_e,audience:ve,useRefreshTokens:!0,onRedirectCallback:a=>{z.push(a&&a.targetUrl?a.targetUrl:window.location.pathname)}});m.on(m.AUTH_EVENTS.AUTHENTICATED,async function(){l.defaults.headers.authorization=m.bearer,l.interceptors.request.use(Ut),c.user=m.user,await Lt.getAccount(),W.authenticate(m.bearer)});async function Ut(a){if(!m.isAuthenticated)return a;const e=m.identity.exp*1e3,t=e<Date.now(),n=e<Date.now()+1e3*60*60*12;return t?await m.loginWithPopup():n&&(await m.getTokenSilently(),l.defaults.headers.authorization=m.bearer,W.authenticate(m.bearer)),a}const jt={setup(){return{user:b(()=>c.user),async login(){m.loginWithPopup()},async logout(){m.logout({returnTo:window.location.origin})}}}},T=a=>(se("data-v-34187aa5"),a=a(),re(),a),Bt={class:"navbar navbar-expand-lg navbar-dark bg-dark px-3"},Ht=T(()=>o("div",{class:"d-flex align-items-end"},[o("i",{class:"mdi mdi-castle fs-1"}),o("p",null,"THE TOWER")],-1)),zt=T(()=>o("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarText","aria-controls":"navbarText","aria-expanded":"false","aria-label":"Toggle navigation"},[o("span",{class:"navbar-toggler-icon"})],-1)),Wt={class:"collapse navbar-collapse",id:"navbarText"},Kt=T(()=>o("ul",{class:"navbar-nav me-auto"},[o("li",null,[o("button",{class:"btn btn-outline-success lighten-30 selectable text-uppercase","aria-label":"Create new event",title:"create new event","data-bs-toggle":"modal","data-bs-target":"#create-event-modal"}," Create Event ")])],-1)),Yt={class:"navbar-text"},Ft={key:1,class:"dropdown my-2 my-lg-0"},Gt={class:"dropdown-toggle selectable","data-bs-toggle":"dropdown","aria-expanded":"false",id:"authDropdown"},Qt=["src"],Xt={class:"mx-3 text-success lighten-30"},Jt={class:"dropdown-menu p-0 list-group w-100","aria-labelledby":"authDropdown"},Zt=T(()=>o("div",{class:"list-group-item list-group-item-action hoverable"}," Manage Account ",-1)),eo=T(()=>o("i",{class:"mdi mdi-logout"},null,-1)),to=V(" logout "),oo=[eo,to];function no(a,e,t,n,r,i){const s=w("router-link"),_=w("CreateEventModal");return d(),u(I,null,[o("nav",Bt,[y(s,{class:"navbar-brand d-flex",to:{name:"Home"}},{default:k(()=>[Ht]),_:1}),zt,o("div",Wt,[Kt,o("span",Yt,[n.user.isAuthenticated?(d(),u("div",Ft,[o("div",Gt,[o("img",{src:n.user.picture,alt:"user photo",height:"40",class:"rounded"},null,8,Qt),o("span",Xt,p(n.user.name),1)]),o("div",Jt,[y(s,{to:{name:"Account"}},{default:k(()=>[Zt]),_:1}),o("div",{class:"list-group-item list-group-item-action hoverable text-danger",onClick:e[1]||(e[1]=(...E)=>n.logout&&n.logout(...E))},oo)])])):(d(),u("button",{key:0,class:"btn selectable text-success lighten-30 text-uppercase my-2 my-lg-0",onClick:e[0]||(e[0]=(...E)=>n.login&&n.login(...E))}," Login "))])])]),y(_,{id:"create-event-modal"})],64)}var ao=f(jt,[["render",no],["__scopeId","data-v-34187aa5"]]),so=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:ao});const ro={setup(){const a=S();return{async goToProfile(){a.push({name:"Account"})},user:b(()=>c.user),async login(){AuthService.loginWithPopup()},async logout(){AuthService.logout({returnTo:window.location.origin})},account:b(()=>c.account),profile:b(()=>c.profile),router:a}}},io={class:"sidebar d-flex justify-content-center bg-dark"},co={class:"mt-5"},lo=["src","alt","title"],uo={class:"p-1 mt-2"},mo={key:1,class:"dropdown my-2 my-lg-0"},_o=o("div",{class:"dropdown-toggle selectable","data-bs-toggle":"dropdown","aria-expanded":"false",id:"authDropdown"},null,-1),vo={class:"dropdown-menu p-0 list-group w-100","aria-labelledby":"authDropdown"},go=o("div",{class:"list-group-item list-group-item-action hoverable"}," Manage Account ",-1),po=o("i",{class:"mdi mdi-logout"},null,-1),ho=V(" logout "),bo=[po,ho];function fo(a,e,t,n,r,i){const s=w("router-link");return d(),u("div",io,[o("div",co,[o("img",{onClick:e[0]||(e[0]=_=>n.goToProfile()),class:"account-img ms-3",src:n.account.picture,alt:n.account.name+"picture",title:n.account.name+"picture"},null,8,lo),o("div",uo,[o("p",null,p(n.account.name),1),n.user.isAuthenticated?(d(),u("div",mo,[_o,o("div",vo,[y(s,{to:{name:"Account"}},{default:k(()=>[go]),_:1}),o("div",{class:"list-group-item list-group-item-action hoverable text-danger",onClick:e[2]||(e[2]=(..._)=>n.logout&&n.logout(..._))},bo)])])):(d(),u("button",{key:0,class:"btn selectable text-success lighten-30 text-uppercase my-2 my-lg-0",onClick:e[1]||(e[1]=(..._)=>n.login&&n.login(..._))}," Login "))])])])}var yo=f(ro,[["render",fo]]),Eo=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:yo});function wo(a){Object.entries({"./components/Comment.vue":ke,"./components/CreateEventModal.vue":it,"./components/EditEventModal.vue":yt,"./components/Event.vue":Dt,"./components/Navbar.vue":so,"./components/Sidebar.vue":Eo}).forEach(([t,n])=>{const r=n.name||t.substr(t.lastIndexOf("/")+1).replace(/\.\w+$/,"");a.component(r,n.default)})}const K=ie(ue);wo(K);K.use(z).mount("#app");export{c as A,x as P,f as _,Lt as a,l as b,pe as c,B as e,g as l};
